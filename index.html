<html >
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MediCare - Gesti칩n de Enfermer칤a Escolar</title>
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <!-- Login -->
    <div id="login" class="modal">
        <div class="modal-content">
            <h2>Iniciar Sesi칩n</h2>
            <form id="login-form">
                <label>Usuario: <input type="text" id="username" required /></label>
                <label>Contrase침a: <input type="password" id="password" required /></label>
                <button type="submit">Iniciar Sesi칩n</button>
            </form>
            <div id="login-error" style="color:red; margin-top:10px;"></div>
            <div id="forgot-password-container" style="display:none; margin-top:15px;">
                <a href="#" id="forgot-password-link">쯆lvidaste tu contrase침a?</a>
                <div id="forgot-password-form" style="display:none; margin-top:10px;">
                    <input type="password" id="new-password" placeholder="Nueva contrase침a" />
                    <button id="change-password-btn">Cambiar contrase침a</button>
                    <div id="password-change-status" style="margin-top:10px;"></div>
                </div>
            </div>
            <p><a href="#" id="register-link">쯅o tienes cuenta? Reg칤strate aqu칤</a></p>
        </div>
    </div>

    <!-- Registro Padre -->
    <div id="register" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>Registro de Padre de Familia</h2>
            <form id="register-form">
                <label>Usuario: <input type="text" id="reg-username" required /></label>
                <label>Contrase침a: <input type="password" id="reg-password" required /></label>
                <label>Confirmar Contrase침a: <input type="password" id="reg-confirm-password" required /></label>
                <button type="submit">Registrar Cuenta</button>
            </form>
            <div id="register-error" style="color:red; margin-top:10px;"></div>
        </div>
    </div>

    <!-- Marco Legal SOLO Padre -->
    <div id="legal-framework" class="modal" style="display: none;">
        <div class="modal-content legal-modal-content">
            <h2>游늯 MARCO LEGAL Y CONFIDENCIALIDAD</h2>
            <p>
                MediCare es una aplicaci칩n institucional para el 치rea de enfermer칤a escolar, destinada al registro, gesti칩n y seguimiento de informaci칩n m칠dica b치sica de los estudiantes.
            </p>
            <p>
                El tratamiento de datos personales y m칠dicos se rige por la Ley Org치nica de Protecci칩n de Datos Personales del Ecuador, garantizando confidencialidad, integridad y uso responsable de la informaci칩n.
            </p>
            <p>
                Los datos ser치n utilizados 칰nicamente para atenci칩n m칠dica, emergencias escolares y comunicaci칩n con los representantes legales.
            </p>
            <p>
                El acceso no autorizado, divulgaci칩n o uso indebido de la informaci칩n constituye una falta grave con posibles responsabilidades legales.
            </p>
            <label style="display:flex;align-items:center;gap:0.5em;">
                <input type="checkbox" id="legal-accept" /> He le칤do y acepto los t칠rminos y condiciones
            </label>
            <button id="accept-legal" disabled>INGRESAR</button>
        </div>
    </div>

    <!-- Aplicaci칩n -->
    <div id="app" style="display: none; max-width: 900px; margin: 0 auto; padding: 20px;">
        <header style="text-align:center;">
            <h1>MediCare - Gesti칩n de Enfermer칤a Escolar</h1>
            <p id="user-role"></p>
        </header>

        <!-- Navegaci칩n padre -->
        <nav id="nav-parent" style="display: none; margin-bottom: 20px;">
            <button onclick="showSection('profile')">Perfil de Estudiante</button>
            <button onclick="showSection('alerts')">Alertas de Retiro</button>
            <button onclick="showSection('history')">Historial de Visitas</button>
        </nav>

        <!-- Navegaci칩n enfermera -->
        <nav id="nav-nurse" style="display: none; margin-bottom: 20px;">
            <button onclick="showSection('profile')">Perfil de Estudiante</button>
            <button onclick="showSection('vitals')">Signos Vitales y S칤ntomas</button>
            <button onclick="showSection('messaging')">Mensajer칤a Interna</button>
            <button onclick="showSection('entry-exit')">Ingreso/Egreso y Historial</button>
        </nav>

        <!-- SECCIONES -->

        <!-- Perfil -->
        <section id="profile" class="section" style="display:none;">
            <h2>Perfil B치sico de Enfermer칤a</h2>

            <!-- Selecci칩n solo para Enfermer칤a -->
            <div id="nurse-student-selector" style="margin-bottom:15px; display:none;">
                <label>Seleccionar Estudiante:
                    <select id="student-selector"></select>
                </label>
            </div>

            <form id="profile-form" style="display:none;">
                <label>Nombre Completo: <input type="text" id="full-name" required></label>
                <label>Curso/Grado:
                    <select id="grade" required>
                        <option value="">Seleccionar</option>
                        <option value="Inicial">Inicial</option>
                        <option value="1ro B치sica">1ro de B치sica</option>
                        <option value="2do B치sica">2do de B치sica</option>
                        <option value="3ro B치sica">3ro de B치sica</option>
                        <option value="4to B치sica">4to de B치sica</option>
                        <option value="5to B치sica">5to de B치sica</option>
                        <option value="6to B치sica">6to de B치sica</option>
                        <option value="7mo B치sica">7mo de B치sica</option>
                        <option value="8vo Secundaria">8vo de Secundaria</option>
                        <option value="9no Secundaria">9no de Secundaria</option>
                        <option value="10mo Secundaria">10mo de Secundaria</option>
                        <option value="1ro Bachillerato Ciencias">1ro Bachillerato Ciencias</option>
                        <option value="2do Bachillerato Ciencias">2do Bachillerato Ciencias</option>
                        <option value="3ro Bachillerato Ciencias">3ro Bachillerato Ciencias</option>
                        <option value="1ro Bachillerato Contabilidad">1ro Bachillerato Contabilidad</option>
                        <option value="2do Bachillerato Contabilidad">2do Bachillerato Contabilidad</option>
                        <option value="3ro Bachillerato Contabilidad">3ro Bachillerato Contabilidad</option>
                        <option value="1ro Bachillerato Inform치tica">1ro Bachillerato Inform치tica</option>
                        <option value="2do Bachillerato Inform치tica">2do Bachillerato Inform치tica</option>
                        <option value="3ro Bachillerato Inform치tica">3ro Bachillerato Inform치tica</option>
                    </select>
                </label>
                <label>Identificaci칩n: <input type="text" id="identification" required></label>
                <label>Nombre del Representante Legal: <input type="text" id="legal-rep-name" required></label>
                <label>N칰mero Telef칩nico del Representante: <input type="tel" id="rep-phone" required></label>
                <label>N칰mero Auxiliar: <input type="tel" id="aux-phone"></label>
                <label>N칰meros de Emergencia (Cant칩n General Villamil Playas):
                    <ul style="list-style:none; padding-left:0;">
                        <li>04-276-2342 / 04-276-0095 (Bomberos) <a href="tel:042762342"><button class="call-btn">Llamar Bomberos</button></a></li>
                        <li>0985568992 (Hospital) <a href="tel:0985568992"><button class="call-btn">Llamar Hospital</button></a></li>
                    </ul>
                </label>
                <label>Alergias: <textarea id="allergies"></textarea></label>
                <label>Enfermedades: <textarea id="diseases"></textarea></label>
                <label>Medicamentos Actuales: <textarea id="medications"></textarea></label>

                <button type="submit">Guardar Perfil</button>
            </form>

            <!-- Para enfermera: vista de datos no ed. de perfil -->
            <div id="selected-student-info"></div>
        </section>

        <!-- Signos Vitales -->
        <section id="vitals" class="section" style="display:none;">
            <h2>Signos Vitales, S칤ntomas y Procedimiento</h2>
            <form id="vitals-form">
                <label>Pulso (bpm): <input type="number" id="pulse" required></label>
                <label>Presi칩n Arterial: <input type="text" id="blood-pressure" required></label>
                <label>Temperatura (춿C): <input type="number" step="0.1" id="temperature" required></label>
                <label>Frecuencia Respiratoria (rpm): <input type="number" id="respiratory-rate" required></label>
                <label>S칤ntomas: <textarea id="symptoms" required></textarea></label>
                <label>Procedimiento: <textarea id="procedure" required></textarea></label>
                <button type="submit">Guardar Datos</button>
            </form>
        </section>

        <!-- Mensajer칤a -->
        <section id="messaging" class="section" style="display:none;">
            <h2>Mensajer칤a Interna</h2>
            <p>Redacte el motivo por el cual el estudiante debe ser retirado.</p>
            <textarea id="withdrawal-message" placeholder="Escriba el motivo aqu칤..." required></textarea>
            <button id="report-withdrawal">Enviar Mensaje y Reportar Retiro</button>
            <div id="message-status"></div>
        </section>

        <!-- Ingreso / Egreso e Historial -->
        <section id="entry-exit" class="section" style="display:none;">
            <h2>Ingreso/Egreso y Historial de Visitas</h2>
            <form id="entry-exit-form">
                <label>Fecha y Hora de Ingreso: <input type="datetime-local" id="entry-datetime" required></label>
                <label>Fecha y Hora de Egreso: <input type="datetime-local" id="exit-datetime" required></label>
                <label>Retirado por: <input type="text" id="withdrawn-by" placeholder="Nombre de la persona que retira" required></label>
                <button type="submit">Registrar Ingreso/Egreso</button>
            </form>
            <div id="exit-status"></div>
            <h3>Historial de Visitas</h3>
            <ul id="visit-history"></ul>
        </section>

        <!-- Alertas Padre -->
        <section id="alerts" class="section" style="display:none;">
            <h2>Alertas de Retiro</h2>
            <div id="alerts-list"></div>
        </section>

        <!-- Historial Padre -->
        <section id="history" class="section" style="display:none;">
            <h2>Historial de Visitas</h2>
            <ul id="parent-history"></ul>
        </section>
    </div>

    <script src="script.js"></script>
</body>
</html>